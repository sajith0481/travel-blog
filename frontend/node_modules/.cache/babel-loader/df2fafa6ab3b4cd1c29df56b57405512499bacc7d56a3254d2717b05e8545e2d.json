{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sajit\\\\Documents\\\\Sharanya_codes\\\\TravelBlog\\\\travel_blog_new\\\\frontend\\\\src\\\\components\\\\NewPost.js\",\n  _s = $RefreshSig$();\n// NewPost component is a form that allows users to create new posts. The form has input fields for the title and content of the post. When the form is submitted, the handleSubmit function is called, which makes a POST request to the /api/posts endpoint with the post data. The post data is constructed from the title and content state variables using the useState hook.\nimport React, { useState, useContext } from 'react';\nimport { UserContext } from '../contexts/UserContext';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction NewPost() {\n  _s();\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const [successMessage, setSuccessMessage] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  const {\n    user\n  } = useContext(UserContext); // Assuming user context provides the token\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const postData = {\n      title,\n      content,\n      author_id: user.id\n    }; // Use user.id from context\n\n    try {\n      const response = await fetch('http://localhost:3000/posts/api/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${user.token}` // Include the token in the header\n        },\n        body: JSON.stringify(postData)\n      });\n      console.log('Full response:', response);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      setSuccessMessage(`Post created successfully! You can view it `);\n      setErrorMessage('');\n      console.log('Post created:', data);\n    } catch (error) {\n      setErrorMessage(`Error: ${error.message}`);\n      setSuccessMessage('');\n      console.error('Error:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Title:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: title,\n          onChange: e => setTitle(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Content:\", /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: content,\n          onChange: e => setContent(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 24\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Create Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), successMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [successMessage, /*#__PURE__*/_jsxDEV(Link, {\n          to: `/posts/${data && data.id}`,\n          children: \"here\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this), \".\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n}\n_s(NewPost, \"jX05M9lJB2YpIRl7FWFLUSLABMU=\");\n_c = NewPost;\nexport default NewPost;\nvar _c;\n$RefreshReg$(_c, \"NewPost\");","map":{"version":3,"names":["React","useState","useContext","UserContext","Link","jsxDEV","_jsxDEV","NewPost","_s","title","setTitle","content","setContent","successMessage","setSuccessMessage","errorMessage","setErrorMessage","user","handleSubmit","event","preventDefault","postData","author_id","id","response","fetch","method","headers","token","body","JSON","stringify","console","log","ok","Error","status","data","json","error","message","children","onSubmit","type","value","onChange","e","target","fileName","_jsxFileName","lineNumber","columnNumber","to","_c","$RefreshReg$"],"sources":["C:/Users/sajit/Documents/Sharanya_codes/TravelBlog/travel_blog_new/frontend/src/components/NewPost.js"],"sourcesContent":["// NewPost component is a form that allows users to create new posts. The form has input fields for the title and content of the post. When the form is submitted, the handleSubmit function is called, which makes a POST request to the /api/posts endpoint with the post data. The post data is constructed from the title and content state variables using the useState hook.\r\nimport React, { useState, useContext } from 'react';\r\nimport { UserContext } from '../contexts/UserContext';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction NewPost() {\r\n  const [title, setTitle] = useState('');\r\n  const [content, setContent] = useState('');\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const { user } = useContext(UserContext); // Assuming user context provides the token\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const postData = { title, content, author_id: user.id }; // Use user.id from context\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:3000/posts/api/', {\r\n        method: 'POST',\r\n        headers: { \r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${user.token}` // Include the token in the header\r\n        },\r\n        body: JSON.stringify(postData),\r\n      });\r\n\r\n      console.log('Full response:', response);\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      const data = await response.json();\r\n      setSuccessMessage(`Post created successfully! You can view it `);\r\n      setErrorMessage('');\r\n      console.log('Post created:', data);\r\n    } catch (error) {\r\n      setErrorMessage(`Error: ${error.message}`);\r\n      setSuccessMessage('');\r\n      console.error('Error:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={handleSubmit}>\r\n        <label>Title:<input type=\"text\" value={title} onChange={e => setTitle(e.target.value)} /></label>\r\n        <label>Content:<textarea value={content} onChange={e => setContent(e.target.value)} /></label>\r\n        <button type=\"submit\">Create Post</button>\r\n      </form>\r\n      {successMessage && (\r\n        <div>\r\n          <p>{successMessage}\r\n            <Link to={`/posts/${data && data.id}`}>here</Link>.\r\n          </p>\r\n        </div>\r\n      )}\r\n      {errorMessage && (\r\n        <div>\r\n          <p>{errorMessage}</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NewPost;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}